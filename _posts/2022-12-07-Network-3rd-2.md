---
title: "라우터 Default-Gateway"
#excerpt: "국비 수업 복습"

#categories:
# - HRD
tags:
 - [EVE]


toc: true
toc_sticky: true

date: 2022-12-07
last_modified_at: 2022-12-07

#img: ":aws 1.png"

---

<!-- outline-start -->



- Default Route : 경로를 찾지 못하는 모든 네트워크의 경로를 미리 정해놓는 것.


우선, 지정되어 있는 ip route를 지우고 default-gateway를 설정해주자.



### 01. 라우터 ip route 지우기/삭제.


```yaml

> enable
# show run

```

![6](https://user-images.githubusercontent.com/117553252/211135083-43facdfb-60ea-4e0b-94b8-9f1673aad5dd.png)




- show run에서
  Space Bar) 한 페이지씩 넘기
  Enter Key) 한 줄씩 넘기기

- 메모장 켜서 ip route 주소 복붙해서 맨 앞에 'no' 붙이기

```yaml

ex.
  no ip route 2.0.0.0 255.0.0.0 1.1.1.2
  no ip route 3.0.0.0 255.0.0.0 1.1.1.2
  no ip route 126.0.0.0 255.0.0.0 1.1.1.2
  no ip route 191.255.0.0 255.255.0.0 1.1.1.2
  no ip route 223.255.255.0 255.255.255.0 1.1.1.2

```


- 그리고 전체 복사해서 Router에 입력해주기.



```yaml

#conf t
(config-if)# 오른쪽 마우스 클릭 ! (자동으로 붙여넣기 됨)

```




### 02. 라우터 Default-Gateway 설정 - 방법 01.
  : 이웃의 주소를 쓰는 경우.

![7](https://user-images.githubusercontent.com/117553252/211135085-5f1a9278-c09d-41c2-a440-9970edfd8d5e.png)




![8](https://user-images.githubusercontent.com/117553252/211135090-47950d30-da7e-43f1-9af5-450637b78b2f.png)




위 사진을 예로 들면,

R1의 경우)
  ip route 0.0.0.0 0.0.0.0 1.1.1.2 찾는 목적지가 조건에 없으면 1.1.1.2로 (모르는 건 전부 오른쪽으로)

R3의 경우)
  ip route 0.0.0.0 0.0.0.0 2.1.1.1 찾는 목적지가 조건에 없으면 2.1.1.1로 (모르는 건 전부 왼쪽으로)

R4의 경우)
  ip route 0.0.0.0 0.0.0.0 3.1.1.1 찾는 목적지가 조건에 없으면 3.1.1.1로

R2) 이것만 주의해 주면 됨.




그렇다면 R2는 어떻게 해야 될까?

  -> R2는 1개만 Default-Gateway를 설정해주고, 나머지는 다 직접 지정해줘야 한다.



정리를 해 보자면,

틀린 예시
  ```yaml
  ip route 0.0.0.0 0.0.0.0 1.1.1.1
  ip route 0.0.0.0 0.0.0.0 2.1.1.2
  ip route 0.0.0.0 0.0.0.0 3.1.1.2
  ```

올바른 예시
  ```yaml
  ip route 0.0.0.0 0.0.0.0 1.1.1.1
  ip route 191.255.0.0 255.255.0.0 2.1.1.2
  ip route 223.255.255.0 255.255.255.0 3.1.1.2
  ```



### 03. 라우터 Default-Gateway 설정 - 방법 02.
  : 자신의 로컬 주소를 쓰는 경우.


![11](https://user-images.githubusercontent.com/117553252/211135252-bcc804e9-654a-4762-aecc-0d4580ef2c81.png)



- 가끔 라우터 주소가 멀리 떨어져 있는 경우 주소를 모를 때,
  이웃 주소 자리에 자신의 인터페이스를 지정할 수도 있다.

- R1) PC쪽만 잡아주자.
  ip route 126.0.0.0 255.0.0.0 s1/0(자기자신의 s임. 왼쪽 s1/0임)
  ip route 191.255.0.0 255.255.0.0 s1/0
  ip route 223.255.255.0 255.255.255.0 s1/0
  이런식으로 설정해 볼 수 있다.

- 즉 ip route 유형이 2가지라는 뜻.
- 하나는 이웃의 주소를 쓰는 경우 나머지 하나는 자신의 로컬 주소를 쓰는 경우.


![12](https://user-images.githubusercontent.com/117553252/211135251-549304df-3a66-46a9-a793-7e8b0046e0a4.png)





### 04. Looping (루핑)


- R2)
    no ip route 191.255.0.0 255.255.0.0 2.1.1.2
    no ip route 223.255.255.0 255.255.255.0 3.1.1.2

- 루핑 : 뺑글뺑글 도는 것.

- 루핑 만들어서 Linux5 ping한 번 해 보기 191.255.255.1
  그래서 ip 주소를 잘 못 준 것은 꼭 지워줘야 함.
  Linux5에서는 계속 주고 받고 하다가 죽어버림.


![9](https://user-images.githubusercontent.com/117553252/211135093-56b73d30-d30c-47b5-a31e-65edf0670255.png)




![10](https://user-images.githubusercontent.com/117553252/211135094-93810d3e-4246-4462-913f-350992288a80.png)


에러가 뜬 것을 확인할 수 있다.




### 05. 참고

```yaml
# show ip int brief
```

```yaml
# show run
```

```yaml
# show ip route
```


이 명령어들은 자주 사용하니 꼭 기억해두자.