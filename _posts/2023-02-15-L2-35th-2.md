---
title: "Etherchannel"

tags:
 - [VLAN]

category: L2&L3.Switch
toc: true
toc_sticky: true

date: 2023-02-15
last_modified_at: 2023-02-15

#img: ":aws 1.png"

---

<!-- outline-start -->

### STP protocol<br/>

사진첨부
<br/><br/>

두 개의 포트가 열리는 것이 `아니다.`<br/><br/>

사진첨부
<br/><br/>

- 프로토콜은 `PAgp(Cisco장비간)`, `LACP(IEEE표준)` 두 가지로 나뉜다.<br/><br/>

### LACP 명령어<br/>

int range fa0/1 - 10<br/>
channel-protocol `lacp`<br/>
channel-group `1` mode `(active, passive)`<br/><br/>

### PAgP 명령어<br/>

int range fa0/1 - 10<br/>
channel-protocol `PAgP`<br/>
channel-group `1` mode `(desirable, auto)`<br/><br/>

### Ex. LACP, PAgP 명령어<br/>

```yaml
int range fa1/1 - 4
channel-protocol lacp
channel-group 2 mode active
```
<br/><br/>

### Ex 01.<br/>

사진첨부
<br/><br/>

#### 방법<br/>

Switch 0)<br/>

```yaml
vlan 100

interface vlan 100
ip address 1.1.12.1 255.255.255.0

interface range fa0/1 - fa0/2
channel-protocol lacp
channel-group 1 mode active

interface port-channel 1
switchport mode access
switchport access vlan 100

show etherchannel summary
```

<br/><br/>


Switch 1)<br/>

```yaml
vlan 100

interface vlan 100
ip address 1.1.12.2 255.255.255.0

interface range fa0/1 - fa0/2
channel-protocol lacp
channel-group 1 mode passive

interface port-channel 1
switchport mode access
switchport access vlan 100

show etherchannel summary
```

<br/><br/>


#### 결과<br/>

사진첨부
<br/><br/>

사진첨부
<br/>Fa0/1, Fa0/2 뒤에 P가 나오는 것을 확인할 수 있다.<br/><br/>

사진첨부
<br/>Fa0/1, Fa0/2 뒤에 P가 나오는 것을 확인할 수 있다. <br/><br/>

사진첨부
<br/>ping도 다 가는 것을 확인할 수 있다.<br/><br/>

### 참고<br/>

- Flangs는 Port의 상태를 의미함<br/>
- R : no switchport<br/>
- S : switchport<br/><br/>

- # show etherchannel summary<br/><br/>

### Ex 02.<br/>

사진첨부
<br/><br/>

#### 방법 : RU + RU<br/>

S1)<br/>

```yaml
int range Gi0/0 - 1
no switchport
channel-protocol lacp
channel-group 1 mode active

int port-channel 1
no switchport
ip add 1.1.1.1 255.0.0.0
no shutdown
```

<br/><br/>

S2)<br/>

```yaml
int range Gi0/0 - 1
no switchport
channel-protocol lacp
channel-group 1 mode passive

int port-channel 1
no switchport
ip add 1.1.1.2 255.0.0.0
no shutdown
```

<br/><br/>

#### 결과 # show etehrchannel summary<br/>

사진첨부
<br/><br/>

사진첨부
<br/><br/>

#### 방법 : SU + SU<br/>

S1)<br/>

```yaml
vlan 10

int vlan 10
ip add 1.1.1.1 255.0.0.0
no shutdown

int range Gi0/0 - 1
switchport mode access
switchport access vlan 10
channel-protocol lacp
channel-group 1 mode active

int port-channel 1
switchport mode access
switchport access vlan 10
```

<br/><br/>

S2)<br/>

```yaml
vlan 10

int vlan 10
ip add 1.1.1.2 255.0.0.0
no shutdown

int range Gi0/0 - 1
switchport mode access
switchport access vlan 10
channel-protocol lacp
channel-group 1 mode passive

int port-channel 1
switchport mode access
swtichport access vlan 10
```
<br/><br/>

#### 결과<br/>

사진첨부
<br/><br/>

사진첨부
<br/><br/>

#### 방법 : SU + SU<br/>

S1)<br/>

```yaml
vlan 10

int vlan 10
ip add 1.1.1.1 255.0.0.0
no shutdown

int range Gi0/0 - 1
switchport trunk encapsulation dot1Q
switchport mode trunk
channel-protocol lacp
channel-group 1 mode active

int port-channel 1
switchport trunk encapsulation dot1Q
switchport mode trunk
```

<br/><br/>

S2)<br/>

```yaml
vlan 10

int vlan 10
ip add 1.1.1.2 255.0.0.0
no shutdown

int range Gi0/0 - 1
switchport trunk encapsulation dot1Q
switchport mode trunk
channel-protocol lacp
channel-group 1 mode passive

int port-channel 1
switchport trunk encapsulation dot1Q
switchport mode trunk
```

<br/><br/>

#### 결과<br/>

사진첨부
<br/><br/>

사진첨부
<br/><br/>

### Ex. Etherchannel<br/>

사진첨부
<br/><br/>

#### 결과<br/>

PC끼리 ping이 되면 된다.<br/><br/>